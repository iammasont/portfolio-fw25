---
// Clean, performant Custom Cursor (Dot + Trailing Ring)
// Dependency-Free.
---

<div id="custom-dot"></div>
<div id="trailing-ring"></div>

<style>
    :root {
        --dot-size: 10px; 
    }

    body {
        cursor: none;
    }

    /* --- 1. Custom Dot (Highest Z-index, INSTANT tracking) --- */
    #custom-dot {
        position: fixed;
        top: 0;
        left: 0;
        width: var(--dot-size);
        height: var(--dot-size);
        background-color: var(--black);
        border-radius: 50%;
        transform: translate(-50%, -50%); 
        z-index: 10002; /* Above everything */
        pointer-events: none;
    }

    /* --- 2. Trailing Ring (Smooth, delayed tracking) --- */
    #trailing-ring {
        position: fixed;
        top: 0;
        left: 0;
        width: 32px; /* Base size */
        height: 32px;
        border: 2px solid var(--black);
        background-color: transparent;
        border-radius: 50%;
        opacity: 0.5;
        z-index: 10001; 
        pointer-events: none;
        transform: translate(-50%, -50%); 
    }

    @media (hover: none) and (pointer: coarse) {
        #custom-dot,
        #trailing-ring {
            display: none;
        }
        
        body {
            cursor: auto !important;
        }
        }
</style>

<script>
    // --- MAIN INITIALIZATION FUNCTION ---
    function init() {
        const dot = document.getElementById('custom-dot');
        const ring = document.getElementById('trailing-ring');
        
        if (!dot || !ring) return;

        let W = window.innerWidth;
        let H = window.innerHeight;
        
        // --- INPUT & POSITION STATE ---
        let mousePos = { x: W / 2, y: H / 2 };
        let ringPos = { x: W / 2, y: H / 2 }; 
        const RING_EASING = 0.15; // Controls the delay/smoothness (lower = slower/more delay)
        
        let lastTime = performance.now();
        
        // --- HANDLERS ---
        function handleMouseMove(e) {
            // 1. Update dot position (INSTANT tracking via style.left/top)
            // We update left/top, and the CSS transform(-50%, -50%) centers it.
            dot.style.left = `${e.clientX}px`;
            dot.style.top = `${e.clientY}px`;
            
            // 2. Update mouse position for ring tracking
            mousePos.x = e.clientX;
            mousePos.y = e.clientY; 
        }

        function handleResize() {
            W = window.innerWidth;
            H = window.innerHeight;
        }

        function draw(time) {
            const deltaTime = time - lastTime;
            lastTime = time;
            
            // --- TRAILING RING LOGIC (Smooth Position) ---
            
            // Lerp the ring position toward the current mouse position
            ringPos.x += (mousePos.x - ringPos.x) * RING_EASING;
            ringPos.y += (mousePos.y - ringPos.y) * RING_EASING;

            // Apply smoothed position to the trailing ring (adjusting for element size: 32px / 2 = 16px)
            // Note: We use style.left/top here and let the CSS transform handle centering
            ring.style.left = `${ringPos.x}px`;
            ring.style.top = `${ringPos.y}px`;
            
            requestAnimationFrame(draw);
        }

        // --- STARTUP ---
        window.addEventListener('mousemove', handleMouseMove);
        window.addEventListener('resize', handleResize);
        
        handleResize();
        draw(performance.now());
    }

    document.addEventListener('DOMContentLoaded', init);
</script>
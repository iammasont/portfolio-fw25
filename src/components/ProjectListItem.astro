---
// src/components/ProjectListItem.astro
// List-based project card for homepage
export interface Props {
  client: string;
  title: string;
  tags: string[];
  slug: string;
}

const { client, title, tags, slug } = Astro.props;
---

<a href={`/work/${slug}`} class="project-list-item" data-hover="true">
  <div class="project-item-content">
    <!-- Client Name (top left, small) -->
    <div class="project-client">{client}</div>
    
    <!-- Project Title (large, left) -->
    <h3 class="project-title">{title}</h3>
    
    <!-- Right Column: Tags + View Project -->
    <div class="project-tags">
      <div class="tags-list">
        {tags.map(tag => (
          <span class="tag">{tag}</span>
        ))}
      </div>
      
      <!-- View Project Link (bottom of right column) -->
      <div class="project-cta">
        <span class="cta-text">VIEW PROJECT âž”</span>
      </div>
    </div>
  </div>
</a>

<style>
  .project-list-item {
    display: block;
    text-decoration: none;
    color: var(--black);
    border-bottom: 2px solid var(--black);
    padding: 20px 0; /* Tighter vertical padding */
    transition: background 0.2s ease-out;
  }

  .project-list-item:hover {
    background: rgba(0, 0, 0, 0.03);
  }

  .project-item-content {
    display: grid;
    grid-template-columns: 1fr auto;
    grid-template-rows: auto 1fr;
    gap: 8px 40px; /* Tighter vertical gap */
    align-items: start;
  }

  /* Client Name (top left) */
  .project-client {
    grid-column: 1;
    grid-row: 1;
    font-family: 'Geist Mono', monospace;
    font-size: 1.25rem; /* Doubled from 1rem */
    letter-spacing: 0.05em;
    text-transform: uppercase;
    font-weight: 500;
    opacity: 0.8;
  }

  /* Project Title (middle left, spans to fill space) */
  .project-title {
    grid-column: 1;
    grid-row: 2;
    font-family: 'Geist', sans-serif;
    font-weight: 700;
    font-size: clamp(4rem, 5vw, 7rem); /* Doubled from 3rem-6rem to 4rem-10rem */
    line-height: 0.9;
    letter-spacing: -0.02em;
    margin: 0; /* Remove default h3 margin */
    text-transform: uppercase;
    text-wrap: balance;
    max-width: 20ch; /* Shorter max-width for better rag */
  }

  /* Right Column Container - holds tags AND view project */
  .project-tags {
    grid-column: 2;
    grid-row: 1 / 3; /* Span both rows */
    display: grid;
    grid-template-rows: auto 1fr auto; /* Tags at top, spacer, CTA at bottom */
    align-items: start;
    justify-items: end; /* Align everything to the right */
    text-align: right;
    min-height: 100%; /* Force container to take full height */
    height: 100%; /* Ensure it stretches */
  }

  .tags-list {
    display: flex;
    flex-direction: column;
    gap: 4px;
    align-items: flex-end;
  }

  .tag {
    font-family: 'Geist Mono', monospace;
    font-size: 1rem; /* Doubled from 0.875rem */
    text-transform: uppercase;
    letter-spacing: 0.03em;
    font-weight: 500;
    white-space: nowrap;
  }

  /* View Project CTA (now inside project-tags container) */
  .project-cta {
    align-self: end; /* Stick to bottom of grid cell */
  }

  .cta-text {
    font-family: 'Geist', sans-serif; /* Changed from Geist Mono */
    font-size: 1.25rem; /* Doubled from 1rem */
    font-weight: 700; /* Bold */
    letter-spacing: 0.02em;
    transition: transform 0.2s ease-out;
    display: inline-block;
    text-transform: uppercase;
  }

  .project-list-item:hover .cta-text {
    transform: translateX(4px);
  }

  /* Responsive */
  @media (max-width: 1024px) {
    .project-title {
      font-size: clamp(2.5rem, 7vw, 5rem);
    }

    .project-item-content {
      gap: 8px 30px;
    }
  }

  @media (max-width: 768px) {
    .project-list-item {
      padding: 16px 0; /* Tighter on mobile */
    }

    .project-item-content {
      grid-template-columns: 1fr;
      grid-template-rows: auto auto auto;
      gap: 12px;
    }

    /* Stack everything vertically on mobile, all left-aligned */
    .project-client {
      grid-column: 1;
      grid-row: 1;
      font-size: 0.875rem;
    }

    .project-title {
      grid-column: 1;
      grid-row: 2;
      font-size: clamp(3rem, 1vw, 3rem)
      max-width: 100%; /* Full width on mobile */
    }

    .project-tags {
      grid-column: 1;
      grid-row: 3;
      display: flex; /* Switch from grid to flex on mobile */
      flex-direction: row;
      align-items: center;
      justify-content: space-between; /* Tags on left, VIEW PROJECT on right */
      text-align: left;
      width: 100%;
      min-height: auto;
      height: auto;
    }

    .tags-list {
      flex-direction: row;
      flex-wrap: wrap;
      align-items: flex-start;
      gap: 6px;
    }

    .tag {
      font-size: 0.75rem;
    }

    .project-cta {
      text-align: right;
      align-self: center;
      flex-shrink: 0; /* Prevent CTA from shrinking */
    }

    .cta-text {
      font-size: 0.875rem;
    }
  }
</style>